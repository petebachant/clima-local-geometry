schema: '2.0'
stages:
  analyze-local-geometry-impact:
    cmd: calkit xenv -n main --no-check -- 
      "scripts/analysis_local_geometry_impact.jl"
    deps:
    - path: .calkit/envs/main/Manifest.toml
      hash: md5
      md5: f053a8db8375d9886430ab4024d9e9eb
      size: 186
    - path: scripts/analysis_local_geometry_impact.jl
      hash: md5
      md5: 8d0e7a6ca5cdece8a8edb38f1bba9c64
      size: 16383
    outs:
    - path: results/analysis_local_geometry_impact.md
      hash: md5
      md5: ccc982384837e89e866fefd11def6c3a
      size: 4351
  benchmark-local-geometry-impact:
    cmd: calkit slurm batch --name benchmark-local-geometry-impact --environment
      clima --dep scripts/benchmark_local_geometry_impact.jl --dep 
      ClimaCore.jl/.buildkite/Manifest.toml --dep ClimaCore.jl/src --dep 
      ClimaCore.jl/ext --out results/benchmark_local_geometry_impact.md -s 
      --gpus=1 -s --time=30 -- scripts/run_benchmark_slurm.sh
    deps:
    - path: ClimaCore.jl/.buildkite/Manifest.toml
      hash: md5
      md5: d2dce9a07ad814b227bd47cb017d7fea
      size: 104332
    - path: ClimaCore.jl/ext
      hash: md5
      md5: 3f056c53cd7ed1404dbe16ddc46eee71.dir
      size: 188794
      nfiles: 25
    - path: ClimaCore.jl/src
      hash: md5
      md5: a0a3445b59926ec3cf96b53e08cf7aa7.dir
      size: 1166227
      nfiles: 97
    - path: scripts/benchmark_local_geometry_impact.jl
      hash: md5
      md5: cddc292ae3418a052a83ca98654692f4
      size: 8371
    - path: scripts/run_benchmark_slurm.sh
      hash: md5
      md5: 88df3fd56272acc43dfc346a2c64bade
      size: 1584
      isexec: true
    outs:
    - path: .calkit/slurm/logs/benchmark-local-geometry-impact.out
      hash: md5
      md5: a0a327eaf2bba704ade4c20d9115e636
      size: 4940
    - path: results/benchmark_local_geometry_impact.md
      hash: md5
      md5: ce000249b4d0261c4106d92f314c629e
      size: 599
  amip-mod:
    cmd: calkit slurm batch --name amip-mod --environment clima --dep 
      config/climaatmos_progedmf_1m.yml --dep scripts/run_progedmf_1m.jl --dep 
      ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml --dep 
      ClimaAtmos.jl-mod/src -s --gpus=1 -s --time=120 -- 
      scripts/run-julia-script.sh --project=ClimaAtmos.jl-mod/.buildkite 
      scripts/run_progedmf_1m.jl
    deps:
    - path: ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 505dfffd81f351b90e1e40f9a796d831
      size: 117661
    - path: ClimaAtmos.jl-mod/src
      hash: md5
      md5: 10af56bee683b4f8298c17d7e2f8afd3.dir
      size: 1462921
      nfiles: 105
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 8743b95b52b4a72ef72b1135ad094afd
      size: 1150
    - path: scripts/run-julia-script.sh
      hash: md5
      md5: c982c866ef1cd9cab26d7c5b78a4224b
      size: 560
    - path: scripts/run_progedmf_1m.jl
      hash: md5
      md5: d485e9f1f6346198a72c2245392b3ac9
      size: 1913
    outs:
    - path: .calkit/slurm/logs/amip-mod.out
      hash: md5
      md5: da7db7a02867e0a79e86ac3711b2f0ef
      size: 39353668
  amip-baseline:
    cmd: calkit slurm batch --name amip-baseline --environment clima --dep 
      config/climaatmos_progedmf_1m.yml --dep scripts/run_progedmf_1m.jl --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml --dep ClimaAtmos.jl/src -s 
      --gpus=1 -s --time=120 -- scripts/run-julia-script.sh 
      --project=ClimaAtmos.jl/.buildkite scripts/run_progedmf_1m.jl
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 505dfffd81f351b90e1e40f9a796d831
      size: 117661
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: a193f5b819a84a730eb64048364b41c9.dir
      size: 1462877
      nfiles: 105
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 8743b95b52b4a72ef72b1135ad094afd
      size: 1150
    - path: scripts/run-julia-script.sh
      hash: md5
      md5: c982c866ef1cd9cab26d7c5b78a4224b
      size: 560
    - path: scripts/run_progedmf_1m.jl
      hash: md5
      md5: d485e9f1f6346198a72c2245392b3ac9
      size: 1913
    outs:
    - path: .calkit/slurm/logs/amip-baseline.out
      hash: md5
      md5: 20fcaef66e6c81c9cd9074721d989720
      size: 22587
  analyze-logs:
    cmd: calkit nb execute --environment py --no-check --to html 
      "notebooks/analyze-logs.ipynb"
    deps:
    - path: .calkit/envs/py/uv.lock
      hash: md5
      md5: 0882eaf66a48e31088a716a1d1bc8aa8
      size: 98212
    - path: .calkit/notebooks/cleaned/notebooks/analyze-logs.ipynb
      hash: md5
      md5: e49e3f3f48d1bac2c04868ad0dc9946c
      size: 1631
    - path: .calkit/slurm/logs/amip-baseline.out
      hash: md5
      md5: 969cf22c42fe6c93fdf3b724748fadaf
      size: 18577
    - path: .calkit/slurm/logs/amip-mod.out
      hash: md5
      md5: 0469a8cda58b7a506475593873b00713
      size: 18570
    outs:
    - path: .calkit/notebooks/executed/notebooks/analyze-logs.ipynb
      hash: md5
      md5: 9f8e7f28def8a5b28438e4180036a846
      size: 43427
    - path: .calkit/notebooks/html/notebooks/analyze-logs.html
      hash: md5
      md5: b00cfeceedb5f21e7bdf549093f60d0f
      size: 315355
    - path: figures/sypd-time-series.png
      hash: md5
      md5: 5a13368159a4ebdb085f9ffc1b646e19
      size: 30470
  nsys-baseline:
    cmd: calkit slurm batch --name nsys-baseline --environment clima --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml --dep ClimaAtmos.jl/src --dep
      config/climaatmos_progedmf_1m.yml --dep 
      ClimaAtmos.jl/perf/benchmark_step.jl --out results/nsys/baseline.nsys-rep 
      -s --gpus=1 -s --time=120 -- scripts/run-nsys.sh 
      --output=results/nsys/baseline julia --project=ClimaAtmos.jl/.buildkite 
      ClimaAtmos.jl/perf/benchmark_step.jl 
      --config_file=config/climaatmos_progedmf_1m.yml
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 505dfffd81f351b90e1e40f9a796d831
      size: 117661
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: a193f5b819a84a730eb64048364b41c9.dir
      size: 1462877
      nfiles: 105
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 43663eb9dce0bca4e506572a51043d8a
      size: 1231
    - path: scripts/run-nsys.sh
      hash: md5
      md5: c240f656eac069c8f8f4c7cc3cc71078
      size: 1489
    outs:
    - path: .calkit/slurm/logs/nsys-baseline.out
      hash: md5
      md5: 9fb5553e96a18a4c47b4a721e29c46dd
      size: 18590
    - path: results/nsys/baseline.nsys-rep
      hash: md5
      md5: cbee79eb7ad91aa418dbcd733161ca5d
      size: 23824882
