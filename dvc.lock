schema: '2.0'
stages:
  analyze-local-geometry-impact:
    cmd: calkit xenv -n main --no-check -- 
      "scripts/analysis_local_geometry_impact.jl"
    deps:
    - path: .calkit/envs/main/Manifest.toml
      hash: md5
      md5: f053a8db8375d9886430ab4024d9e9eb
      size: 186
    - path: scripts/analysis_local_geometry_impact.jl
      hash: md5
      md5: 8d0e7a6ca5cdece8a8edb38f1bba9c64
      size: 16383
    outs:
    - path: results/analysis_local_geometry_impact.md
      hash: md5
      md5: ccc982384837e89e866fefd11def6c3a
      size: 4351
  benchmark-local-geometry-impact:
    cmd: calkit slurm batch --name benchmark-local-geometry-impact --environment
      clima --dep scripts/benchmark_local_geometry_impact.jl --dep 
      ClimaCore.jl/.buildkite/Manifest.toml --dep ClimaCore.jl/src --dep 
      ClimaCore.jl/ext --out results/benchmark_local_geometry_impact.md -s 
      --gpus=1 -s --time=30 -- scripts/run_benchmark_slurm.sh
    deps:
    - path: ClimaCore.jl/.buildkite/Manifest.toml
      hash: md5
      md5: 20fd144ed1c5d9c03d65fc81f2cacd26
      size: 104332
    - path: ClimaCore.jl/ext
      hash: md5
      md5: 6ac8e4573960baeb9bcce5de9dde65e6.dir
      size: 199576
      nfiles: 25
    - path: ClimaCore.jl/src
      hash: md5
      md5: 28e74e8728bbd5c032e64a54823d2c6e.dir
      size: 1189678
      nfiles: 98
    - path: scripts/benchmark_local_geometry_impact.jl
      hash: md5
      md5: c0e0310fc91ae5ae215984aac56b4530
      size: 30523
    - path: scripts/run_benchmark_slurm.sh
      hash: md5
      md5: bae0f1e55c355f6d14b76c5a76d00f02
      size: 1800
      isexec: true
    outs:
    - path: .calkit/slurm/logs/benchmark-local-geometry-impact.out
      hash: md5
      md5: 77d51f8fb409b137d6e2652199681d41
      size: 15572
    - path: results/benchmark_local_geometry_impact.md
      hash: md5
      md5: 4348641c4109e2c5ea16dfa06c7212b5
      size: 2860
  amip-mod:
    cmd: calkit slurm batch --name amip-mod --environment clima --dep 
      config/climaatmos_progedmf_1m.yml --dep scripts/run_progedmf_1m.jl --dep 
      ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml --dep 
      ClimaAtmos.jl-mod/src -s --gpus=1 -s --time=120 -- 
      scripts/run-julia-script.sh --project=ClimaAtmos.jl-mod/.buildkite 
      scripts/run_progedmf_1m.jl
    deps:
    - path: ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 373003f586ac5e7f986775a161a7ab5a
      size: 117663
    - path: ClimaAtmos.jl-mod/src
      hash: md5
      md5: c793672484ace64aba638075f912d82b.dir
      size: 1512452
      nfiles: 106
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 6b44ef8fd381d2127ee1b668b2e850a7
      size: 1219
    - path: scripts/run-julia-script.sh
      hash: md5
      md5: c982c866ef1cd9cab26d7c5b78a4224b
      size: 560
    - path: scripts/run_progedmf_1m.jl
      hash: md5
      md5: 0a8ef250f4638e4e4567145c2a2deee8
      size: 1493
    outs:
    - path: .calkit/slurm/logs/amip-mod.out
      hash: md5
      md5: 0af25fff40c6c22196ba39754cd6b7c3
      size: 18749
  amip-baseline:
    cmd: calkit slurm batch --name amip-baseline --environment clima --dep 
      config/climaatmos_progedmf_1m.yml --dep scripts/run_progedmf_1m.jl --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml --dep ClimaAtmos.jl/src -s 
      --gpus=1 -s --time=120 -- scripts/run-julia-script.sh 
      --project=ClimaAtmos.jl/.buildkite scripts/run_progedmf_1m.jl
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 373003f586ac5e7f986775a161a7ab5a
      size: 117663
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 6bed739e3badb0b55fcb2face363acdc.dir
      size: 1508611
      nfiles: 106
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 6b44ef8fd381d2127ee1b668b2e850a7
      size: 1219
    - path: scripts/run-julia-script.sh
      hash: md5
      md5: c982c866ef1cd9cab26d7c5b78a4224b
      size: 560
    - path: scripts/run_progedmf_1m.jl
      hash: md5
      md5: 0a8ef250f4638e4e4567145c2a2deee8
      size: 1493
    outs:
    - path: .calkit/slurm/logs/amip-baseline.out
      hash: md5
      md5: e3e8824a92ff5aad7dd03c91300efa87
      size: 20866
  analyze-logs:
    cmd: calkit nb execute --environment py --no-check --to html 
      "notebooks/analyze-logs.ipynb"
    deps:
    - path: .calkit/envs/py/uv.lock
      hash: md5
      md5: 0882eaf66a48e31088a716a1d1bc8aa8
      size: 98212
    - path: .calkit/notebooks/cleaned/notebooks/analyze-logs.ipynb
      hash: md5
      md5: e49e3f3f48d1bac2c04868ad0dc9946c
      size: 1631
    - path: .calkit/slurm/logs/amip-baseline.out
      hash: md5
      md5: e3e8824a92ff5aad7dd03c91300efa87
      size: 20866
    - path: .calkit/slurm/logs/amip-mod.out
      hash: md5
      md5: 0af25fff40c6c22196ba39754cd6b7c3
      size: 18749
    outs:
    - path: .calkit/notebooks/executed/notebooks/analyze-logs.ipynb
      hash: md5
      md5: 6ffd4b46b95e396b7e2bda9d1030c31d
      size: 46833
    - path: .calkit/notebooks/html/notebooks/analyze-logs.html
      hash: md5
      md5: fcff8ad07917de29fd337a9babb1b671
      size: 326013
    - path: figures/sypd-time-series.png
      hash: md5
      md5: 175b3bbfd3afc3453c6575f639e9bd1b
      size: 32866
  nsys-baseline:
    cmd: calkit slurm batch --name nsys-baseline --environment clima --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml --dep ClimaAtmos.jl/src --dep
      config/climaatmos_progedmf_1m.yml --dep 
      ClimaAtmos.jl/perf/benchmark_step.jl --out results/nsys/baseline.nsys-rep 
      --out results/nsys/baseline.sqlite -s --gpus=1 -s --time=120 -- 
      scripts/run-nsys.sh --output=results/nsys/baseline julia 
      --project=ClimaAtmos.jl/.buildkite ClimaAtmos.jl/perf/benchmark_step.jl 
      --config_file=config/climaatmos_progedmf_1m.yml
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 373003f586ac5e7f986775a161a7ab5a
      size: 117663
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 6bed739e3badb0b55fcb2face363acdc.dir
      size: 1508611
      nfiles: 106
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 6b44ef8fd381d2127ee1b668b2e850a7
      size: 1219
    - path: scripts/run-nsys.sh
      hash: md5
      md5: c83d8939e62284ff1cff8ea8253de4ac
      size: 1692
    outs:
    - path: .calkit/slurm/logs/nsys-baseline.out
      hash: md5
      md5: 72fb9b4a0f3ef9821f42e9b5805751a3
      size: 130171
    - path: results/nsys/baseline.nsys-rep
      hash: md5
      md5: 9fe0b1ec006b6ac36ccc8276bd13aa56
      size: 23065840
    - path: results/nsys/baseline.sqlite
      hash: md5
      md5: 8917ede15fd2b1201ba031925f860270
      size: 48148480
  nsys-mod:
    cmd: calkit slurm batch --name nsys-mod --environment clima --dep 
      ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml --dep 
      ClimaAtmos.jl-mod/src --dep config/climaatmos_progedmf_1m.yml --dep 
      ClimaAtmos.jl-mod/perf/benchmark_step.jl --out results/nsys/mod.nsys-rep 
      --out results/nsys/mod.sqlite -s --gpus=1 -s --time=120 -- 
      scripts/run-nsys.sh --output=results/nsys/mod julia 
      --project=ClimaAtmos.jl-mod/.buildkite 
      ClimaAtmos.jl-mod/perf/benchmark_step.jl 
      --config_file=config/climaatmos_progedmf_1m.yml
    deps:
    - path: ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 373003f586ac5e7f986775a161a7ab5a
      size: 117663
    - path: ClimaAtmos.jl-mod/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: ClimaAtmos.jl-mod/src
      hash: md5
      md5: c793672484ace64aba638075f912d82b.dir
      size: 1512452
      nfiles: 106
    - path: config/climaatmos_progedmf_1m.yml
      hash: md5
      md5: 6b44ef8fd381d2127ee1b668b2e850a7
      size: 1219
    - path: scripts/run-nsys.sh
      hash: md5
      md5: c83d8939e62284ff1cff8ea8253de4ac
      size: 1692
    outs:
    - path: .calkit/slurm/logs/nsys-mod.out
      hash: md5
      md5: 0f0229de87c5bbaeb93fb2e6e50216d4
      size: 87216
    - path: results/nsys/mod.nsys-rep
      hash: md5
      md5: 9129473c3cf0b7f0d0ef775f3558e13c
      size: 23044088
    - path: results/nsys/mod.sqlite
      hash: md5
      md5: 5d77e816735f1fce5a5e0728ee6ee7ca
      size: 47812608
  compare-kernels:
    cmd: calkit nb execute --environment py --no-check --to html 
      "notebooks/compare-kernels.ipynb"
    deps:
    - path: .calkit/envs/py/uv.lock
      hash: md5
      md5: 0882eaf66a48e31088a716a1d1bc8aa8
      size: 98212
    - path: .calkit/notebooks/cleaned/notebooks/compare-kernels.ipynb
      hash: md5
      md5: 07a8dd133cb6eafb7c6f52de0246df09
      size: 38763
    - path: results/nsys/baseline.sqlite
      hash: md5
      md5: 8917ede15fd2b1201ba031925f860270
      size: 48148480
    - path: results/nsys/mod.sqlite
      hash: md5
      md5: 5d77e816735f1fce5a5e0728ee6ee7ca
      size: 47812608
    outs:
    - path: .calkit/notebooks/executed/notebooks/compare-kernels.ipynb
      hash: md5
      md5: 42c35c8757d3af638dae7cdbf6976a14
      size: 55099
    - path: .calkit/notebooks/html/notebooks/compare-kernels.html
      hash: md5
      md5: 43bada16eba2c5d79fd173eb3d4809b0
      size: 405863
  sync-atmos-mod-core:
    cmd: ' bash --noprofile --norc scripts/sync-atmos-mod-core.sh'
    deps:
    - path: ClimaCore.jl/ext
      hash: md5
      md5: 6ac8e4573960baeb9bcce5de9dde65e6.dir
      size: 199576
      nfiles: 25
    - path: ClimaCore.jl/lib
      hash: md5
      md5: 5c8d819896714d4c699a816a70872cef.dir
      size: 316792
      nfiles: 58
    - path: ClimaCore.jl/src
      hash: md5
      md5: 28e74e8728bbd5c032e64a54823d2c6e.dir
      size: 1189678
      nfiles: 98
    - path: scripts/sync-atmos-mod-core.sh
      hash: md5
      md5: 261698988e9ad35362013216a81944d0
      size: 583
      isexec: true
